# Description
The KMeans algorithm clusters data by trying to separate samples in n groups of equal variance, minimizing a criterion known as the inertia <inertia> or within-cluster sum-of-squares. This algorithm requires the number of clusters to be specified. It scales well to large number of samples and has been used across a large range of application areas in many different fields.

# Usage
1. Enter Paracel's home directory  
```cd paracel;``` 
1. Generate test dataset(datagen.py will also create a result data named `data.csv.label`)   
```python ./tool/datagen.py -m kmeans -o data.csv -n 1000 -k 20 --ncenters 50```
2. Set up link library path:  
```export LD_LIBRARY_PATH=your_paracel_install_path/lib```    
3. Create a json file named `cfg.json`, see example in [Parameters](#parameters) section below.  
4. Run (4 workers, local mode in the following example)  
```./prun.py -w 4 -p 1 -c ./alg/clustering/kmeans/cfg.json -m local ./local/bin/kmeans```

# Parameters
{  
    "input" : "data.csv",  
    "output" : "./kmeans_result/",  
    "type" : "fvec",  
    "kclusters" : 50,  
    "update_file" : "your_paracel_install_path/lib/libkmeans_update.so",  
    "update_functions" : ["local_update_kmeans_clusters", "local_update_kmeans_groups"],  
    "rounds" : 100  
}  
In the configuration file, `kclusters` refers to the number of clusters you want to separate. `update_file`, `update_functions` is the information of the registry function needed in kmeans algorithm. `rounds` refers to the number of training iterations.

<<<<<<< HEAD
=======
{    
    "input" : "data.txt",    
    "output" : "./wc_output/",    
    "topk" : 10,    
    "handle_file" : "your_paracel_install_path/lib/libwc_update.so",   
    "update_function" : "wc_updater",   
    "filter_function" : "wc_filter"   
}

In the configuration file, `handle_file`, `update_function` and `filter_function` is the information of the registry function needed in word count program.
>>>>>>> 3fde1bb66581a3301582596af08e6c6d717e1c12

# Data Format
## Input
[`fvec`](http://paracel.io/docs/api_reference.html#load) case.

## Output
File `centers_0`: center coordinates of each group

File `kmeans_0`: the belonging points of each group
group_id1 point1|point2|...
group_id2 point3|point4|...
...

# Notes
You can make use of the label data generated by `datagen.py` to compare to the training effect.
